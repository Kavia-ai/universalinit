{"is_source_file": true, "format": "TypeScript", "description": "This file provides utility functions for interacting with the Solana blockchain within a web client context, including wallet connection, message signing, signature verification, and submitting memo transactions.", "external_files": ["@solana/web3.js", "tweetnacl", "bs58"], "external_methods": ["Connection", "PublicKey", "Transaction", "TransactionInstruction", "connection.getLatestBlockhash", "connection.sendRawTransaction", "connection.confirmTransaction"], "published": ["getProvider", "connectWallet", "disconnectWallet", "signMessage", "verifySignature", "submitMemoTransaction"], "classes": [], "methods": [{"name": "export function getProvider(): Window[\"solana\"] | null { getProvider", "description": "Detects and returns the injected Solana provider (e.g., Phantom), or null if not present.", "scope": "", "scopeKind": ""}, {"name": "export async function connectWallet(): Promise<string> { connectWallet", "description": "Connects to the user's Solana wallet and returns the public key as a base58 string.", "scope": "", "scopeKind": ""}, {"name": "export async function disconnectWallet(): Promise<void> { disconnectWallet", "description": "Disconnects the currently connected wallet, if any.", "scope": "", "scopeKind": ""}, {"name": "export async function signMessage(message: string): Promise<{ signMessage", "description": "Requests the connected wallet to sign an arbitrary message, returning the signature and public key.", "scope": "", "scopeKind": ""}, {"name": "export function verifySignature(message: string, signatureB58: string, publicKeyB58: string): bo/ verifySignature", "description": "Verifies a signature for a message given the signature and public key in base58 format.", "scope": "", "scopeKind": ""}, {"name": "export async function submitMemoTransaction(message: string): Promise<string> { submitMemoTransaction", "description": "Creates, signs, and submits a memo transaction to the Solana blockchain containing the specified message.", "scope": "", "scopeKind": ""}], "calls": ["new Connection", "getProvider", "provider.connect", "provider.disconnect", "provider.signMessage", "nacl.sign.detached.verify", "bs58.decode", "bs58.encode", "connection.getLatestBlockhash", "connection.sendRawTransaction", "connection.confirmTransaction", "provider.signTransaction"], "search-terms": ["solana connection", "wallet connection", "sign message", "verify signature", "memo transaction", "Phantom wallet", "solana web3.js"], "state": 2, "file_id": 129, "knowledge_revision": 542, "git_revision": "30855f8b919fb13ee78b71b2b324c162ab5ea6e5", "ctags": [{"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^    const errorMessage = error instanceof Error ? error.message : String(error);$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "MEMO_PROGRAM_ID", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const MEMO_PROGRAM_ID = new PublicKey(\"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr\");$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "anyWindow", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const anyWindow = window as Window;$/", "language": "TypeScript", "kind": "constant", "scope": "getProvider", "scopeKind": "function"}, {"_type": "tag", "name": "blockhash", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^    const { blockhash } = await connection.getLatestBlockhash();$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "connectWallet", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^export async function connectWallet(): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "connection", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const connection = new Connection(rpcUrl);$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "connection", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^export const connection = new Connection(rpcUrl, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "disconnectWallet", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^export async function disconnectWallet(): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "encoder", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const encoder = new TextEncoder();$/", "language": "TypeScript", "kind": "constant", "scope": "signMessage", "scopeKind": "function"}, {"_type": "tag", "name": "encoder", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const encoder = new TextEncoder();$/", "language": "TypeScript", "kind": "constant", "scope": "verifySignature", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^    const errorMessage = error instanceof Error ? error.message : String(error);$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "errorMessage", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^    const errorMessage = error instanceof Error ? error.message : String(error);$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "getProvider", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^export function getProvider(): Window[\"solana\"] | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "instanceof", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^    const errorMessage = error instanceof Error ? error.message : String(error);$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "instruction", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const instruction = new TransactionInstruction({$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "msgBytes", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const msgBytes = encoder.encode(message);$/", "language": "TypeScript", "kind": "constant", "scope": "signMessage", "scopeKind": "function"}, {"_type": "tag", "name": "msgBytes", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const msgBytes = encoder.encode(message);$/", "language": "TypeScript", "kind": "constant", "scope": "verifySignature", "scopeKind": "function"}, {"_type": "tag", "name": "pk", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const pk = provider.publicKey?.toBase58?.() ?? provider.publicKey?.toString?.();$/", "language": "TypeScript", "kind": "constant", "scope": "signMessage", "scopeKind": "function"}, {"_type": "tag", "name": "pk", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const pk = res?.publicKey?.toBase58?.() ?? res?.publicKey?.toString?.();$/", "language": "TypeScript", "kind": "constant", "scope": "connectWallet", "scopeKind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const pk = provider.publicKey?.toBase58?.() ?? provider.publicKey?.toString?.();$/", "language": "TypeScript", "kind": "constant", "scope": "signMessage", "scopeKind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const provider = getProvider();$/", "language": "TypeScript", "kind": "constant", "scope": "connectWallet", "scopeKind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const provider = getProvider();$/", "language": "TypeScript", "kind": "constant", "scope": "disconnectWallet", "scopeKind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const provider = getProvider();$/", "language": "TypeScript", "kind": "constant", "scope": "signMessage", "scopeKind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const provider = getProvider();$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const publicKeyStr = provider.publicKey?.toBase58?.() ?? provider.publicKey?.toString?.();$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "pubKeyBytes", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const pubKeyBytes = bs58.decode(publicKeyB58);$/", "language": "TypeScript", "kind": "constant", "scope": "verifySignature", "scopeKind": "function"}, {"_type": "tag", "name": "publicKeyStr", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const publicKeyStr = provider.publicKey?.toBase58?.() ?? provider.publicKey?.toString?.();$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const pk = res?.publicKey?.toBase58?.() ?? res?.publicKey?.toString?.();$/", "language": "TypeScript", "kind": "constant", "scope": "connectWallet", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const res = await provider.connect();$/", "language": "TypeScript", "kind": "constant", "scope": "connectWallet", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const res = await provider.signMessage(msgBytes, \"utf8\");$/", "language": "TypeScript", "kind": "constant", "scope": "signMessage", "scopeKind": "function"}, {"_type": "tag", "name": "rpcUrl", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^const rpcUrl = process.env.NEXT_PUBLIC_SOLANA_RPC_URL || \"http:\\/\\/localhost:8899\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "sigBytes", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const sigBytes = ArrayBuffer.isView(res)$/", "language": "TypeScript", "kind": "constant", "scope": "signMessage", "scopeKind": "function"}, {"_type": "tag", "name": "sigBytes", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const sigBytes = bs58.decode(signatureB58);$/", "language": "TypeScript", "kind": "constant", "scope": "verifySignature", "scopeKind": "function"}, {"_type": "tag", "name": "signMessage", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^export async function signMessage(message: string): Promise<{$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "signature", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^    const signature = await connection.sendRawTransaction(signedTransaction.serialize());$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "signedTransaction", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^    const signedTransaction = await provider.signTransaction(transaction);$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "submitMemoTransaction", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^export async function submitMemoTransaction(message: string): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "transaction", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^  const transaction = new Transaction().add(instruction);$/", "language": "TypeScript", "kind": "constant", "scope": "submitMemoTransaction", "scopeKind": "function"}, {"_type": "tag", "name": "verifySignature", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^export function verifySignature(message: string, signatureB58: string, publicKeyB58: string): bo/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "wsUrl", "path": "/home/kavia/workspace/code-generation/universalinit/src/universalinit/templates/solananextjs/src/lib/solana.ts", "pattern": "/^const wsUrl = process.env.NEXT_PUBLIC_SOLANA_WS_URL || \"ws:\\/\\/localhost:8900\";$/", "language": "TypeScript", "kind": "constant"}], "hash": "ee2bdc0205f1f642213abd24f130970a", "format-version": 4, "code-base-name": "universalinit", "filename": "src/universalinit/templates/solananextjs/src/lib/solana.ts", "revision_history": [{"542": "30855f8b919fb13ee78b71b2b324c162ab5ea6e5"}]}